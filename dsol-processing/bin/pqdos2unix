#!/usr/local/bin/python2.6
# -*- mode: python -*-

import re, sys, os

if len(sys.argv) == 1:
    sys.stderr.write("No file to work on\n")
    exit(1)
else:
    infile = sys.argv[1]
    if len(sys.argv) == 3:
        outfile = sys.argv[2]
        inplace = False
    else:
        outfile = infile + '.tmp'
        inplace = True

outfh = open(outfile, 'w')
for line in open(infile):
    outfh.write(re.sub(r'\r\n$', '\n', line))
    
outfh.close()

if inplace is True:
    import shutil
    shutil.move(outfile, infile)
