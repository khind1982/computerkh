#!/usr/local/bin/python2.6
import site
site.addsitedir('/packages/dsol/lib/python2.6/site-packages')
import os, sys
sys.path.append(os.path.join(os.path.dirname(__file__) + '/../lib/python'))
from ibss.marc_to_abm import *



if __name__ == '__main__':
    #remove previous log if there is
    if os.path.isfile('./conversion.log'):
        os.remove('conversion.log') 
    #remove previous output if there is(because of the append ..use write? and remove this part?)
    if os.path.isfile('./'+'output_'+(sys.argv[1])):
        os.remove('./'+'output_'+(sys.argv[1]))
    abm_output = open('./'+'output_'+(sys.argv[1]), 'a')
    abm_log=open('conversion.log','a')
    reader = pymarc.MARCReader(file(sys.argv[1]))
    for marc_record in reader:
        a = Marc_convertor(marc_record,abm_output,abm_log)
        a.map_to_abm()
    

    
    
    
    
    
